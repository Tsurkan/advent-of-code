# Початкова ідея
def max_joltage(bank, n):
    """
    Обчислює найбільший можливий «вольтаж», який можна отримати,
    вибравши рівно n цифр з послідовності bank у початковому порядку.

    Ідея алгоритму:
    ----------------
    Ми шукаємо найбільше можливе число, складаючи його з n цифр,
    але НЕ змінюючи порядок цифр у послідовності. Тобто ми можемо
    лише «пропускати» певні цифри, але не можемо міняти їх місцями.

    Цей метод є спрощеним варіантом класичної задачі:
        «Вибрати k цифр так, щоб отримати найбільше число,
         зберігаючи відносний порядок.»

    Відомий алгоритм:
    ------------------
    Це реалізація жадібного підходу (Greedy Algorithm) у стилі
    «rightmost-choice» — на кожному кроці ми обираємо максимальну можливу цифру
    з допустимого діапазону, який гарантує, що залишиться достатньо цифр,
    щоб зібрати n-значне число.

    Логіка:
    -------
    Нехай треба вибрати n цифр.
    Нехай довжина bank = L.

    На першому кроці ми можемо вибрати найбільшу цифру лише серед:
        bank[0 : L - n + 1]
    бо нам потрібно зберегти ще n-1 цифр.

    На другому кроці ми шукаємо максимальну цифру серед:
        bank[index+1 : L - n + 2]

    Часова складність:  O(n * m), де n — кількість цифр, які треба вибрати; 
    m — розмір «вікна» пошуку max. У гіршому випадку ~O(N²).

    Це не найефективніше рішення але воно працює правильно.
    """

    joltage = 0
    last_index = -1

    # end — межа, в якій ми дозволяємо шукати наступну цифру.
    # цикл гарантує, що залишиться достатньо цифр для формування числа.
    for end in range(len(bank) - n, len(bank)):

        # Беремо максимальну цифру у вікні bank[last_index+1 : end+1]
        digit = max(bank[last_index + 1:end + 1])

        # Знаходимо фактичний індекс цієї цифри, щоб рухати межу пошуку
        last_index = bank.index(digit, last_index + 1)

        # Додаємо цифру в «правий край» числа
        joltage = joltage * 10 + digit

    return joltage

with open('2025/day3/input.txt') as f:
    banks = [tuple(map(int, line.rstrip())) for line in f]

print(sum(max_joltage(bank, 2) for bank in banks))
print(sum(max_joltage(bank, 12) for bank in banks))
